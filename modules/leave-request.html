<!-- Ledighetsans√∂kan - Modul -->

<div class="control-panel" style="margin-bottom: 20px;">
    <h2 style="margin: 0; color: #2C3E50;">üìù Ledighetsans√∂kan</h2>
</div>

<!-- Ans√∂kningsformul√§r -->
<div class="panel">
    <h2 class="panel-title">Ans√∂k om ledighet</h2>
    
    <form id="leave-request-form" onsubmit="return submitLeaveRequest(event)">
        <div class="form-row">
            <div class="form-group">
                <label for="leave-type">Typ av ledighet: *</label>
                <select id="leave-type" required>
                    <option value="">‚Äî V√§lj typ ‚Äî</option>
                    <option value="Semester">Semester</option>
                    <option value="ATK">ATK (Arbetstidsf√∂rkortning)</option>
                    <option value="Komp">Komp (Komptid)</option>
                    <option value="VAB">VAB (V√•rd av barn)</option>
                    <option value="Tj√§nstledig">Tj√§nstledig</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="leave-from-date">Fr√•n datum: *</label>
                <input type="date" id="leave-from-date" required onchange="calculateLeaveDays()">
            </div>
            
            <div class="form-group">
                <label for="leave-to-date">Till datum: *</label>
                <input type="date" id="leave-to-date" required onchange="calculateLeaveDays()">
            </div>
        </div>
        
        <!-- Ber√§knad information -->
        <div id="leave-calculation" style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: none;">
            <strong style="color: #0d47a1;">‚ÑπÔ∏è Ber√§knat:</strong>
            <span id="leave-days-text" style="margin-left: 10px; font-size: 16px;"></span>
        </div>
        
        <div class="form-group">
            <label for="leave-comment">Kommentar (valfritt):</label>
            <textarea id="leave-comment" rows="3" placeholder="Frivillig kommentar..."></textarea>
        </div>
        
        <div style="display: flex; gap: 10px;">
            <button type="submit" class="btn btn-primary">üì§ Skicka ans√∂kan</button>
            <button type="button" class="btn btn-secondary" onclick="resetLeaveForm()">Rensa formul√§r</button>
        </div>
    </form>
</div>

<!-- Mina ans√∂kningar -->
<div class="panel">
    <h2 class="panel-title">Mina ledighetsans√∂kningar</h2>
    
    <div class="table-wrapper">
        <table id="my-leave-requests-table">
            <thead>
                <tr>
                    <th>Typ</th>
                    <th>Fr√•n</th>
                    <th>Till</th>
                    <th>Dagar</th>
                    <th>Timmar</th>
                    <th>Status</th>
                    <th>Ans√∂kt</th>
                    <th>Kommentar</th>
                    <th>√Ötg√§rd</th>
                </tr>
            </thead>
            <tbody id="my-leave-requests-body">
                <tr>
                    <td colspan="9" style="text-align: center; padding: 40px; color: #666;">
                        Laddar dina ans√∂kningar...
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Admin-sektion: Hantera alla ans√∂kningar (bara synlig f√∂r Admin/Kontrollant) -->
<div id="admin-leave-section" class="panel" style="display: none;">
    <h2 class="panel-title" style="border-bottom-color: #e74c3c;">üîí Hantera ledighetsans√∂kningar (Admin)</h2>
    
    <div style="margin-bottom: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
        <button class="btn btn-info" onclick="filterLeaveRequests('all')">Alla ans√∂kningar</button>
        <button class="btn btn-warning" onclick="filterLeaveRequests('pending')">‚è≥ V√§ntande</button>
        <button class="btn btn-success" onclick="filterLeaveRequests('approved')">‚úÖ Godk√§nda</button>
        <button class="btn btn-danger" onclick="filterLeaveRequests('denied')">‚ùå Nekade</button>
    </div>
    
    <div class="table-wrapper">
        <table id="all-leave-requests-table">
            <thead>
                <tr>
                    <th>Anv√§ndare</th>
                    <th>Skiftlag</th>
                    <th>Typ</th>
                    <th>Fr√•n</th>
                    <th>Till</th>
                    <th>Dagar</th>
                    <th>Timmar</th>
                    <th>Status</th>
                    <th>Ans√∂kt</th>
                    <th>Kommentar</th>
                    <th>√Ötg√§rder</th>
                </tr>
            </thead>
            <tbody id="all-leave-requests-body">
                <tr>
                    <td colspan="11" style="text-align: center; padding: 40px; color: #666;">
                        Laddar alla ans√∂kningar...
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Dialog f√∂r att neka ans√∂kan med kommentar -->
<div id="deny-leave-dialog" class="dialog-overlay">
    <div class="dialog-content">
        <h2 class="dialog-title">‚ùå Neka ledighetsans√∂kan</h2>
        
        <p style="margin-bottom: 15px;">Ange orsak till varf√∂r ans√∂kan nekas:</p>
        
        <div class="form-group">
            <label for="deny-reason">Orsak:</label>
            <textarea id="deny-reason" rows="4" placeholder="F√∂rklara varf√∂r ans√∂kan nekas..." required></textarea>
        </div>
        
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button class="btn btn-danger" onclick="confirmDenyLeave()">Neka ans√∂kan</button>
            <button class="btn btn-secondary" onclick="closeDenyDialog()">Avbryt</button>
        </div>
    </div>
</div>